<!doctype html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ByLan Template</title>
    <link rel="stylesheet" href="css/template.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<header>
    <div class="logo"></div>
    <div id="menuItems" class="menu-items"></div>
</header>

<div class="wrapper">
    <nav>
        <ul class="cta-items"></ul>
    </nav>

    <main></main>

    <aside class="slider">
        <div class="slide"></div>
        <button class="btn btn-next">></button>
        <button class="btn btn-prev"><</button>
    </aside>
</div>


<div class="grid-container">

    <div id="boxHeader" class="grid-item">
        <div class="logo"></div>
        <div id="menuItems" class="menu-items"></div>
    </div>

    <div id="boxCTA" class="grid-item">CTA</div>
    <div id="boxMain" class="grid-item">MAIN</div>
    <div id="boxCarousel" class="grid-item">CAROUSEL</div>
    <div id="boxSocials" class="grid-item">SOCIALS</div>
    <div id="boxFooter" class="grid-item">FOOTER</div>
</div>

<script>

    const search = 'https://www.avena.dev/exam/wp-json/wp/v2/search';

    let allPosts = 'https://www.avena.dev/exam/wp-json/wp/v2/posts',
        allMedia = 'https://www.avena.dev/exam/wp-json/wp/v2/media';
      //  allPages = 'https://www.avena.dev/exam/wp-json/wp/v2/pages';

    // fetching posts and pages by type
    fetch(search)
        .then(response => response.json())
        .then(searches => {
            searches.length = 9;
            searches.forEach(type => {
                console.log('SEARCH TYPE ID: ' + type.id +
                    '\nTITLE: ' + type.title + '\nTYPE: ' + type.type +
                    '\nSUBTYPE: ' + type.subtype + '\nURL: ' + type.url);
            })
        });

    // shows only pages?? if statement is kinda fishy
    const boxMenu = document.getElementById('menuItems');
    if (search === 'page') {
        boxMenu.innerHTML += `<a href="${type.id}">${type.title}</a>`
    }



    // looping through posts
    const carouselBox = document.getElementById('boxCarousel');

    fetch(allPosts)
        .then(response => response.json())
        .then(posts => {
            posts.length = 1;
            posts.forEach(post => {
                carouselBox.innerHTML += `
            <img src="${post.media}" alt="">
            <div>
           <h3><a href="">${post.title.rendered}</a></h3>
            <p>${post.excerpt.rendered}</p></div>`;
                console.log('ID: ' + post.id + '\nTITLE: ' + post.title.rendered);
            })
        });


    let menuItems = document.getElementById('menuItems');
    let logoItem = document.getElementById('.logo');
    const boxMain = document.getElementById('boxMain');


    fetch(allPages)
        .then(response => response.json())
        .then(pages => {
            pages.forEach(page => {
                boxMain.innerHTML += `
            <h1>${page.title.rendered}</h1>
            <p style="overflow: hidden; max-width: 42ch;">${page.content.rendered}</p>
`;
                console.log('ID: ' + page.id + '\nTITLE: ' + page.title.rendered);
            })
        });

</script>
</body>
</html>